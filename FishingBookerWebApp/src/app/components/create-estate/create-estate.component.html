<h1 mat-dialog-title class="mt-3">Add new estate</h1>

<div mat-dialog-content class="row d-flex justify-content-center g-4"
  style="height: calc(100% - 150px); max-height: unset">
  <div class="col-md justify-content-center">
    <table class="table-responsive mt-3 addItemTable">
      <colgroup>
        <col span="1" style="width: 45%" />
        <col span="1" style="width: 55%" />
      </colgroup>
      <tbody>
        <tr>
          <td class="label">Name</td>
          <td>
            <input class="text-start" type="text" name="name" [(ngModel)]="estate.name" />
          </td>
        </tr>
        <tr>
          <td class="label">Price</td>
          <td>
            <input class="text-start" type="number" name="price" [(ngModel)]="estate.pricePerDay" />
          </td>
        </tr>
        <tr>
          <td class="label faded">Street</td>
          <td>
            <input class="text-start" type="text" name="street" [(ngModel)]="estate.street" disabled />
          </td>
        </tr>
        <tr>
          <td class="label faded">Street number</td>
          <td>
            <input class="text-start" type="number" name="number" [(ngModel)]="estate.number" disabled />
          </td>
        </tr>
        <tr>
          <td class="label faded">City</td>
          <td>
            <input class="text-start" type="text" name="city" [(ngModel)]="estate.city" disabled />
          </td>
        </tr>
        <tr>
          <td class="label faded">Postcode</td>
          <td>
            <input class="text-start" type="text" name="postcode" [(ngModel)]="estate.postcode" disabled />
          </td>
        </tr>
        <tr>
          <td class="label faded">Country</td>
          <td>
            <input class="text-start" type="text" name="country" [(ngModel)]="estate.country" disabled />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div class="d-inline-flex">
              <img style="width: 15px;" src="../../../assets/img/pin.png">
              <a class="ms-1" (click)="openMap()">Choose location on map</a>
            </div>
          </td>
        </tr>
        <tr>
          <td class="label">Capacity</td>
          <td>
            <input class="text-start" type="number" name="capacity" [(ngModel)]="estate.capacity" />
          </td>
        </tr>
        <tr>
          <td class="label">Number of rooms</td>
          <td>
            <input class="text-start" type="number" name="numberOfRooms" [(ngModel)]="estate.numOfRooms" />
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="col-md">
    <table class="table-responsive mt-4 addItemTable">
      <colgroup>
        <col span="1" style="width: 35%" />
        <col span="1" style="width: 65%" />
      </colgroup>
      <tbody>
        <tr>
          <td class="label">Number of beds</td>
          <td>
            <input class="text-start" type="number" name="numberOfBeds" [(ngModel)]="estate.numOfBeds" />
          </td>
        </tr>
        <tr>
          <td>
            <input id="checkid" type="checkbox" value="test"
              [(ngModel)]="estate.percentageTakenFromCanceledReservations" />
          </td>
          <td>
            <label for="checkid" style="word-wrap: break-word">Charge cancelled reservations?
            </label>
          </td>
        </tr>
        <tr>
          <td class="label" [ngClass]="{
              faded: !estate.percentageTakenFromCanceledReservations
            }">
            Take percentage
          </td>
          <td>
            <input class="text-start" type="number" name="percent"
              [disabled]="!estate.percentageTakenFromCanceledReservations" [(ngModel)]="estate.percentageToTake" />
          </td>
        </tr>
        <tr>
          <td class="label">Description</td>
          <td>
            <textarea class="text-start" name="description" [(ngModel)]="estate.description">
            </textarea>
          </td>
        </tr>
        <tr>
          <td class="label">Terms of use</td>
          <td>
            <textarea class="text-start" name="termsOfUse" [(ngModel)]="estate.termsOfUse">
            </textarea>
          </td>
        </tr>
        <tr>
          <td class="label">
            Additional equipment
            <button class="btn ms-4" style="height: 30px; width: 40px; border-radius: 5px; padding: 0;"
              (click)="onAdd()">
              <i class="bi bi-plus mb-1"></i>
            </button>
          </td>
          <td>
            <textarea class="text-start" name="additionalEquipment" readonly>
              {{additionalEquipment}}
            </textarea>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row d-flex justify-content-center" style="text-align: center">
  <mat-error *ngIf="hasErrors()">Fields can't stay empty!</mat-error>
  <mat-error>{{errorMessage}}</mat-error>
</div>

<div mat-dialog-actions class="justify-content-center align-items-center mt-1">
  <button (click)="onConfirm()" class="btn me-2" [disabled]="hasErrors() || found">
    Save
  </button>
  <button (click)="onDismiss()" class="btn" style="background: #f59494">
    Cancel
  </button>
</div>
